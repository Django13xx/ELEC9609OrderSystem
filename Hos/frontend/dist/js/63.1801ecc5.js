"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[63],{3063:function(e,l,t){t.r(l),t.d(l,{default:function(){return Z}});var o=t(3396),r=t(9242),n=t(7139);const a={id:"user-login"},i={class:"form-group"},s=(0,o._)("label",{for:"InputPhoneNumber",class:"center-label"},"Phone Number",-1),u=(0,o._)("small",{id:"emailHelp",class:"form-text text-muted center-label"},"We will never share your phone number with anyone else",-1),d={class:"form-group small-input center-input"},p=(0,o._)("label",{for:"exampleFormControlSelect1"},"Table number",-1),b=(0,o._)("option",{disabled:"",value:""},"--Select a Table--",-1),c=["value","disabled"],m={class:"form-group small-input center-input"},h=(0,o._)("label",{for:"exampleFormControlSelect1"},"Number of Guest",-1),_=(0,o._)("option",null,"1",-1),f=(0,o._)("option",null,"2",-1),v=(0,o._)("option",null,"3",-1),N=(0,o._)("option",null,"4",-1),g=(0,o._)("option",null,"5",-1),w=(0,o._)("option",null,"6",-1),k=(0,o._)("option",null,"7",-1),P=(0,o._)("option",null,"8",-1),y=[_,f,v,N,g,w,k,P],C={class:"link-container"};function x(e,l,t,_,f,v){const N=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",null,[(0,o._)("form",a,[(0,o._)("div",i,[s,(0,o.wy)((0,o._)("input",{type:"tel",class:"form-control small-input center-input",id:"exampleInputPhoneNumber","aria-describedby":"phoneHelp","onUpdate:modelValue":l[0]||(l[0]=e=>f.phoneNumber=e),onInput:l[1]||(l[1]=(...e)=>v.validatePhoneNumber&&v.validatePhoneNumber(...e))},null,544),[[r.nr,f.phoneNumber]]),u]),(0,o._)("div",d,[p,(0,o.wy)((0,o._)("select",{class:"form-control",id:"exampleFormControlSelect1","onUpdate:modelValue":l[2]||(l[2]=e=>f.table_id=e),onChange:l[3]||(l[3]=(...e)=>f.reserveTable&&f.reserveTable(...e))},[b,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.tables,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.table_id,value:e.table_name,disabled:!1===e.table_status},(0,n.zw)(e.table_name),9,c)))),128))],544),[[r.bM,f.table_id]])]),(0,o._)("div",m,[h,(0,o.wy)((0,o._)("select",{class:"form-control",id:"exampleFormControlSelect1","onUpdate:modelValue":l[4]||(l[4]=e=>f.peopleNumber=e)},y,512),[[r.bM,f.peopleNumber]])])])]),(0,o._)("div",C,[(0,o._)("button",{onClick:l[5]||(l[5]=(...e)=>v.saveAndNavigate&&v.saveAndNavigate(...e)),class:"link"},"Start Order"),(0,o.Wm)(N,{to:"hosWelcome",class:"link"},{default:(0,o.w5)((()=>[(0,o.Uk)("Back")])),_:1})])])}t(7658);var S=t(4161),T={data(){return{phoneNumber:"",table_id:null,order_code:"",peopleNumber:"1",tables:[],reserveTable:null,phoneNumberValid:!1}},created(){S.Z.get("/api/table").then((e=>{this.tables=e.data})).catch((e=>{console.error("获取桌子信息时出错",e)}))},methods:{validatePhoneNumber(e){let l=e.target.value.replace(/\D/g,"");this.phoneNumber=l,""===this.phoneNumber?console.log("Phone number is required."):this.phoneNumberValid=!0},saveAndNavigate(){if(null===this.table_id)alert("Please select a table before proceeding.");else if(!1===this.phoneNumberValid)alert("Please input Phone Number before proceeding.");else{const e=`/api/function/reserve_table/?table_name=${this.table_id}`;S.Z.get(e).then((e=>{this.table_status=e.data})).catch((e=>{console.error("Error fetching dishes:",e)}));const l=(new Date).getTime();this.order_code=this.table_id+"_"+l.toString(),S.Z.post("/api/order/",{order_code:this.order_code,order_table:this.table_id,order_numberOfPeople:this.peopleNumber}).catch((e=>{console.log(e)})),this.$router.push({name:"userMenu",params:{number:this.peopleNumber,table:this.table_id,order:this.order_code}}),""!==this.phoneNumber.trim()&&/^\d+$/.test(this.phoneNumber)?S.Z.post("/api/user/",{customer_phone:this.phoneNumber}).catch((e=>{console.log(e)})):console.log("Phone number is invalid.")}}}},V=t(89);const D=(0,V.Z)(T,[["render",x]]);var Z=D}}]);
//# sourceMappingURL=63.1801ecc5.js.map