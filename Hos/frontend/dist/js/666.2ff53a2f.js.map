{"version":3,"file":"js/666.2ff53a2f.js","mappings":"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","sources":["webpack://frontend/./src/pages/UserCardPay.vue","webpack://frontend/./src/components/CardPayPage.vue","webpack://frontend/./src/components/CardPayPage.vue?d7f9","webpack://frontend/./src/pages/UserCardPay.vue?2cc3"],"sourcesContent":["<template>\n    <div>\n        <div>\n            <CardPayPage/>\n        </div>\n    </div>\n  </template>\n\n  <script>\n    import CardPayPage from '@/components/CardPayPage.vue';\n    export default {\n      name: 'HosWelcomePage',\n      components: {\n        CardPayPage\n      }\n    }\n  </script>","<template>\n  <div class=\"user-payment\">\n    <h1 class=\"text-center\">Pay by card</h1>\n    <h4 class=\"text-center\">\n          Total amount:{{ amount }}\n    </h4>\n    <form @submit.prevent=\"processPayment\">\n      <!-- 支付信息表单（添加监听） -->\n      <div class=\"form-group\">\n        <label for=\"cardHolder\">Holder Name:</label>\n        <input type=\"text\" id=\"Holder Name\" v-model=\"holderName\" @input=\"validateHolderName\"  placeholder=\"holder name\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"cardNumber\">Card Number:</label>\n        <input type=\"text\" id=\"cardNumber\" v-model=\"cardNumber\" @input=\"validateCardNumber\" placeholder=\"Card Number\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"expiryDate\">Expire Date:</label>\n        <input type=\"text\" id=\"expiryDate\" v-model=\"expiryDate\" @input=\"validateExpiryDate\" placeholder=\"Expire Date (MM/YY)\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"cvv\">CVV:</label>\n        <input type=\"text\" id=\"cvv\" v-model=\"cvv\" @input=\"validateCVV\" placeholder=\"CVV\" required>\n      </div>\n      <div class=\"link-container\">\n        <router-link to=\"UserCardPay\" class=\"link\" @click=\"processPayment\">Pay</router-link>\n        </div>\n    </form>\n\n    <!-- 支付结果提示 -->\n    <div v-if=\"paymentStatus\" class=\"payment-status\">\n      {{ paymentStatus }}\n    </div>\n  </div>\n</template>\n\n//for the payment processing\n\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      // available data\n      order: this.$route.params.order,\n      amount: 0,\n      holderName: '',\n      cardNumber: '',\n      expiryDate: '',\n      cvv: '',\n      paymentStatus: '', // use this to show the payment result\n    };\n  },\n  created() {\n    this.get_order_amount();\n  },\n  watch: {\n    paymentStatus(newStatus) {\n      if (newStatus === 'Payment Successful!') {\n        setTimeout(() => {\n          this.$router.push('/userBye');\n        }, 1500);\n      }\n    },\n  },\n  methods: {\n    get_order_amount() {\n      const endpoint = `/api/function/get_order_amount/?order_code=${this.order}`;\n      axios.get(endpoint)\n        .then((response) => {\n          this.amount = response.data.order_amount;\n        })\n        .catch((error) => {\n          console.error('Error fetching amount:', error);\n        });\n    },\n    validateHolderName() {\n      const regex = /^[a-zA-Z]*$/; // 正则表达式，匹配字母\n      if (!regex.test(this.holderName)) {\n        this.holderName = this.holderName.substring(0, this.holderName.length - 1); // 删除最后一个字符\n      }\n    },\n    validateCardNumber() {\n      const regex = /^[0-9]*$/; // 正则表达式，匹配数字\n      if (!regex.test(this.cardNumber)) {\n        this.cardNumber = this.cardNumber.substring(0, this.cardNumber.length - 1); // 删除最后一个字符\n      }\n    },\n    validateCVV() {\n      const regex = /^[0-9]*$/; // 正则表达式，匹配数字\n      if (!regex.test(this.cvv)) {\n        this.cvv = this.cvv.substring(0, this.cvv.length - 1); // 删除最后一个字符\n      }\n    },\n    validateExpiryDate() {\n      const regex = /^[0-9/]*$/; // 正则表达式，匹配数字和斜杠\n      if (!regex.test(this.expiryDate)) {\n        this.expiryDate = this.expiryDate.substring(0, this.expiryDate.length - 1); // 删除最后一个字符\n      }\n    },\n    processPayment() {\n      // 在这里可以添加具有处理支付的逻辑，通过调用另一个方法或直接编写逻辑。\n      this.submitCardPay();  // 现在这里调用了submitCardPay\n    },\n    submitCardPay() {\n      // 使用查询参数构建完整的URL\n      const urlWithParams = `/api/function/card_check/?name=${this.holderName}&number=${this.cardNumber}&date=${this.expiryDate}&cvv=${this.cvv}`;\n      // 发送GET请求到构建的URL\n      axios.get(urlWithParams)\n        .then(response => {\n          // 处理响应，例如更新支付状态\n          if (response.data) {\n            this.paymentStatus = 'Payment Successful!';\n          } else {\n            this.paymentStatus = 'Payment Failed! Please try again.';\n          }\n        })\n        .catch(error => {\n          console.error('Error during payment submission:', error);\n          this.paymentStatus = 'Payment Failed due to an unexpected error.';\n        });\n    },\n  },\n};\n</script>\n\n\n\n<style scoped>\n/* 样式可以根据你的需求进行自定义 */\n.user-payment {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n}\n\nbutton {\n  background-color: #007BFF;\n  color: #fff;\n  border: none;\n  padding: 10px 15px;\n  cursor: pointer;\n}\n\n.payment-status {\n  margin-top: 20px;\n  padding: 10px;\n  background-color: #dff0d8;\n  border: 1px solid #c3e6cb;\n  color: #155724;\n  text-align: center;\n}\n</style>\n","import { render } from \"./CardPayPage.vue?vue&type=template&id=26088cdc&scoped=true\"\nimport script from \"./CardPayPage.vue?vue&type=script&lang=js\"\nexport * from \"./CardPayPage.vue?vue&type=script&lang=js\"\n\nimport \"./CardPayPage.vue?vue&type=style&index=0&id=26088cdc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-26088cdc\"]])\n\nexport default __exports__","import { render } from \"./UserCardPay.vue?vue&type=template&id=ce1f5c22\"\nimport script from \"./UserCardPay.vue?vue&type=script&lang=js\"\nexport * from \"./UserCardPay.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_createElementVNode","_createVNode","_component_CardPayPage","class","for","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","$data","amount","onSubmit","_cache","_withModifiers","args","$options","processPayment","_hoisted_4","_hoisted_5","type","id","holderName","$event","onInput","validateHolderName","placeholder","required","_hoisted_6","_hoisted_7","cardNumber","validateCardNumber","_hoisted_8","_hoisted_9","expiryDate","validateExpiryDate","_hoisted_10","_hoisted_11","cvv","validateCVV","_hoisted_12","_component_router_link","to","onClick","paymentStatus","_hoisted_13","data","order","this","$route","params","created","get_order_amount","watch","newStatus","setTimeout","$router","push","methods","endpoint","axios","get","then","response","order_amount","catch","error","console","regex","test","substring","length","submitCardPay","urlWithParams","__exports__","name","components","CardPayPage","render"],"sourceRoot":""}